"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[8205],{3777(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"module-2-robotic-nervous-system/chapter-1/solutions","title":"Solutions: ROS 2 Architecture and Communication Patterns","description":"Solution for Exercise 1: Basic Publisher-Subscriber","source":"@site/docs/module-2-robotic-nervous-system/chapter-1/solutions.md","sourceDirName":"module-2-robotic-nervous-system/chapter-1","slug":"/module-2-robotic-nervous-system/chapter-1/solutions","permalink":"/Physicial_Ai_Book_Hackathon_1/docs/module-2-robotic-nervous-system/chapter-1/solutions","draft":false,"unlisted":false,"editUrl":"https://github.com/shirazkk/Physicial_Ai_Book_Hackathon_1/edit/main/my-website/docs/module-2-robotic-nervous-system/chapter-1/solutions.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Exercises: ROS 2 Architecture and Communication Patterns","permalink":"/Physicial_Ai_Book_Hackathon_1/docs/module-2-robotic-nervous-system/chapter-1/exercises"},"next":{"title":"Bridging Python-based AI Agents to Robot Controllers","permalink":"/Physicial_Ai_Book_Hackathon_1/docs/module-2-robotic-nervous-system/chapter-2/ai-agent-bridge"}}');var t=r(4848),i=r(8453);const a={},l="Solutions: ROS 2 Architecture and Communication Patterns",o={},c=[{value:"Solution for Exercise 1: Basic Publisher-Subscriber",id:"solution-for-exercise-1-basic-publisher-subscriber",level:2},{value:"Complete Publisher Code",id:"complete-publisher-code",level:3},{value:"Complete Subscriber Code",id:"complete-subscriber-code",level:3},{value:"How to Run",id:"how-to-run",level:3},{value:"Solution for Exercise 2: Service-Based Calculator",id:"solution-for-exercise-2-service-based-calculator",level:2},{value:"Service Definition",id:"service-definition",level:3},{value:"Service Server Code",id:"service-server-code",level:3},{value:"Service Client Code",id:"service-client-code",level:3},{value:"Solution for Exercise 3: Action-Based Navigation",id:"solution-for-exercise-3-action-based-navigation",level:2},{value:"Action Definition",id:"action-definition",level:3},{value:"Action Server Code",id:"action-server-code",level:3},{value:"Action Client Code",id:"action-client-code",level:3},{value:"Solution for Exercise 4: QoS Configuration Challenge",id:"solution-for-exercise-4-qos-configuration-challenge",level:2},{value:"QoS Example Code",id:"qos-example-code",level:3},{value:"Solution for Exercise 5: Parameter-Based Configuration",id:"solution-for-exercise-5-parameter-based-configuration",level:2},{value:"Parameter-Based Node",id:"parameter-based-node",level:3},{value:"How to Test Parameters",id:"how-to-test-parameters",level:3},{value:"Implementation Guide",id:"implementation-guide",level:2},{value:"For Exercise 1:",id:"for-exercise-1",level:3},{value:"For Exercise 2:",id:"for-exercise-2",level:3},{value:"For Exercise 3:",id:"for-exercise-3",level:3},{value:"For Exercise 4:",id:"for-exercise-4",level:3},{value:"For Exercise 5:",id:"for-exercise-5",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Common Pitfalls to Avoid",id:"common-pitfalls-to-avoid",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"solutions-ros-2-architecture-and-communication-patterns",children:"Solutions: ROS 2 Architecture and Communication Patterns"})}),"\n",(0,t.jsx)(n.h2,{id:"solution-for-exercise-1-basic-publisher-subscriber",children:"Solution for Exercise 1: Basic Publisher-Subscriber"}),"\n",(0,t.jsx)(n.h3,{id:"complete-publisher-code",children:"Complete Publisher Code"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float64\nimport random\n\nclass TemperaturePublisher(Node):\n\n    def __init__(self):\n        super().__init__('temperature_publisher')\n        self.publisher = self.create_publisher(Float64, '/temperature', 10)\n        timer_period = 2.0  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.get_logger().info('Temperature publisher started')\n\n    def timer_callback(self):\n        msg = Float64()\n        # Generate random temperature between 18 and 25 degrees Celsius\n        msg.data = random.uniform(18.0, 25.0)\n        self.publisher.publish(msg)\n        self.get_logger().info(f'Published temperature: {msg.data:.2f}\xb0C')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    temperature_publisher = TemperaturePublisher()\n\n    try:\n        rclpy.spin(temperature_publisher)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        temperature_publisher.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"complete-subscriber-code",children:"Complete Subscriber Code"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float64\n\nclass TemperatureSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('temperature_subscriber')\n        self.subscription = self.create_subscription(\n            Float64,\n            '/temperature',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n        self.get_logger().info('Temperature subscriber started')\n\n    def listener_callback(self, msg):\n        temperature = msg.data\n        if 20.0 <= temperature <= 24.0:\n            status = \"Comfortable temperature range\"\n        else:\n            status = \"Temperature outside comfortable range\"\n\n        self.get_logger().info(f'Received temperature: {temperature:.2f}\xb0C - {status}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    temperature_subscriber = TemperatureSubscriber()\n\n    try:\n        rclpy.spin(temperature_subscriber)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        temperature_subscriber.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"how-to-run",children:"How to Run"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Save the publisher code as ",(0,t.jsx)(n.code,{children:"temperature_publisher.py"})]}),"\n",(0,t.jsxs)(n.li,{children:["Save the subscriber code as ",(0,t.jsx)(n.code,{children:"temperature_subscriber.py"})]}),"\n",(0,t.jsx)(n.li,{children:"Make sure your ROS 2 environment is sourced"}),"\n",(0,t.jsxs)(n.li,{children:["Run the publisher: ",(0,t.jsx)(n.code,{children:"python3 temperature_publisher.py"})]}),"\n",(0,t.jsxs)(n.li,{children:["In another terminal, run the subscriber: ",(0,t.jsx)(n.code,{children:"python3 temperature_subscriber.py"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"solution-for-exercise-2-service-based-calculator",children:"Solution for Exercise 2: Service-Based Calculator"}),"\n",(0,t.jsx)(n.h3,{id:"service-definition",children:"Service Definition"}),"\n",(0,t.jsxs)(n.p,{children:["First, create a service definition file ",(0,t.jsx)(n.code,{children:"Calculator.srv"})," in a ",(0,t.jsx)(n.code,{children:"srv"})," directory:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"# Request\nfloat64 a\nfloat64 b\nstring operation  # add, subtract, multiply, divide\n---\n# Response\nfloat64 result\nbool success\nstring message\n"})}),"\n",(0,t.jsx)(n.h3,{id:"service-server-code",children:"Service Server Code"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\nimport rclpy\nfrom rclpy.node import Node\nfrom your_package.srv import Calculator  # Replace with your actual package name\n\nclass CalculatorService(Node):\n\n    def __init__(self):\n        super().__init__('calculator_service')\n        self.srv = self.create_service(Calculator, 'calculate', self.calculate_callback)\n\n    def calculate_callback(self, request, response):\n        a = request.a\n        b = request.b\n        operation = request.operation\n\n        if operation == 'add':\n            response.result = a + b\n        elif operation == 'subtract':\n            response.result = a - b\n        elif operation == 'multiply':\n            response.result = a * b\n        elif operation == 'divide':\n            if b == 0:\n                response.success = False\n                response.message = 'Error: Division by zero'\n                return response\n            response.result = a / b\n        else:\n            response.success = False\n            response.message = f'Error: Unknown operation {operation}'\n            return response\n\n        response.success = True\n        response.message = f'Success: {a} {operation} {b} = {response.result}'\n        self.get_logger().info(response.message)\n        return response\n\ndef main(args=None):\n    rclpy.init(args=args)\n    calculator_service = CalculatorService()\n\n    try:\n        rclpy.spin(calculator_service)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        calculator_service.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"service-client-code",children:"Service Client Code"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\nimport sys\nimport rclpy\nfrom rclpy.node import Node\nfrom your_package.srv import Calculator  # Replace with your actual package name\n\nclass CalculatorClient(Node):\n\n    def __init__(self):\n        super().__init__('calculator_client')\n        self.cli = self.create_client(Calculator, 'calculate')\n        while not self.cli.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('Service not available, waiting again...')\n\n    def send_request(self, a, b, operation):\n        request = Calculator.Request()\n        request.a = a\n        request.b = b\n        request.operation = operation\n        future = self.cli.call_async(request)\n        return future\n\ndef main(args=None):\n    rclpy.init(args=args)\n    calculator_client = CalculatorClient()\n\n    if len(sys.argv) != 4:\n        print('Usage: python3 calculator_client.py <num1> <num2> <operation>')\n        print('Operations: add, subtract, multiply, divide')\n        return\n\n    a = float(sys.argv[1])\n    b = float(sys.argv[2])\n    operation = sys.argv[3]\n\n    future = calculator_client.send_request(a, b, operation)\n    rclpy.spin_until_future_complete(calculator_client, future)\n\n    try:\n        response = future.result()\n        if response.success:\n            print(f'Result: {response.message}')\n        else:\n            print(f'Error: {response.message}')\n    except Exception as e:\n        print(f'Service call failed: {e}')\n\n    calculator_client.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"solution-for-exercise-3-action-based-navigation",children:"Solution for Exercise 3: Action-Based Navigation"}),"\n",(0,t.jsx)(n.h3,{id:"action-definition",children:"Action Definition"}),"\n",(0,t.jsxs)(n.p,{children:["Create an action definition file ",(0,t.jsx)(n.code,{children:"Navigate.action"})," in an ",(0,t.jsx)(n.code,{children:"action"})," directory:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"# Goal\nfloat64 target_x\nfloat64 target_y\n---\n# Result\nfloat64 final_x\nfloat64 final_y\nbool success\nstring message\n---\n# Feedback\nfloat64 current_x\nfloat64 current_y\nfloat64 distance_remaining\nint32 percentage_complete\n"})}),"\n",(0,t.jsx)(n.h3,{id:"action-server-code",children:"Action Server Code"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\nimport rclpy\nfrom rclpy.action import ActionServer\nfrom rclpy.node import Node\nfrom your_package.action import Navigate  # Replace with your actual package name\nimport time\n\nclass NavigateActionServer(Node):\n\n    def __init__(self):\n        super().__init__('navigate_action_server')\n        self._action_server = ActionServer(\n            self,\n            Navigate,\n            'navigate',\n            self.execute_callback)\n\n    def execute_callback(self, goal_handle):\n        self.get_logger().info('Received navigation goal')\n\n        # Simulate navigation\n        start_x, start_y = 0.0, 0.0  # Starting position\n        target_x = goal_handle.request.target_x\n        target_y = goal_handle.request.target_y\n\n        # Calculate distance\n        total_distance = ((target_x - start_x)**2 + (target_y - start_y)**2)**0.5\n        current_x, current_y = start_x, start_y\n\n        # Navigation simulation\n        step_size = 0.1  # Move 0.1 units per step\n        steps = int(total_distance / step_size)\n\n        feedback_msg = Navigate.Feedback()\n\n        for i in range(steps + 1):\n            if goal_handle.is_cancel_requested:\n                goal_handle.canceled()\n                result = Navigate.Result()\n                result.success = False\n                result.message = 'Goal canceled'\n                return result\n\n            # Calculate current position\n            ratio = i / steps if steps > 0 else 1.0\n            current_x = start_x + (target_x - start_x) * ratio\n            current_y = start_y + (target_y - start_y) * ratio\n\n            # Calculate remaining distance\n            distance_remaining = ((target_x - current_x)**2 + (target_y - current_y)**2)**0.5\n            percentage_complete = int(ratio * 100)\n\n            # Publish feedback\n            feedback_msg.current_x = current_x\n            feedback_msg.current_y = current_y\n            feedback_msg.distance_remaining = distance_remaining\n            feedback_msg.percentage_complete = percentage_complete\n\n            goal_handle.publish_feedback(feedback_msg)\n            self.get_logger().info(f'Progress: {percentage_complete}% - Distance remaining: {distance_remaining:.2f}')\n\n            # Simulate movement time\n            time.sleep(0.1)\n\n        # Complete the goal\n        goal_handle.succeed()\n        result = Navigate.Result()\n        result.final_x = current_x\n        result.final_y = current_y\n        result.success = True\n        result.message = f'Navigation completed successfully to ({current_x:.2f}, {current_y:.2f})'\n\n        self.get_logger().info(result.message)\n        return result\n\ndef main(args=None):\n    rclpy.init(args=args)\n    navigate_action_server = NavigateActionServer()\n\n    try:\n        rclpy.spin(navigate_action_server)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        navigate_action_server.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"action-client-code",children:"Action Client Code"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\nimport rclpy\nfrom rclpy.action import ActionClient\nfrom rclpy.node import Node\nfrom your_package.action import Navigate  # Replace with your actual package name\nimport time\n\nclass NavigateActionClient(Node):\n\n    def __init__(self):\n        super().__init__('navigate_action_client')\n        self._action_client = ActionClient(\n            self,\n            Navigate,\n            'navigate')\n\n    def send_goal(self, target_x, target_y):\n        goal_msg = Navigate.Goal()\n        goal_msg.target_x = target_x\n        goal_msg.target_y = target_y\n\n        self._action_client.wait_for_server()\n\n        # Send the goal\n        self._send_goal_future = self._action_client.send_goal_async(\n            goal_msg,\n            feedback_callback=self.feedback_callback)\n\n        self._send_goal_future.add_done_callback(self.goal_response_callback)\n\n    def goal_response_callback(self, future):\n        goal_handle = future.result()\n        if not goal_handle.accepted:\n            self.get_logger().info('Goal rejected')\n            return\n\n        self.get_logger().info('Goal accepted')\n        self._get_result_future = goal_handle.get_result_async()\n        self._get_result_future.add_done_callback(self.get_result_callback)\n\n    def feedback_callback(self, feedback_msg):\n        feedback = feedback_msg.feedback\n        self.get_logger().info(\n            f'Current position: ({feedback.current_x:.2f}, {feedback.current_y:.2f}), '\n            f'Distance remaining: {feedback.distance_remaining:.2f}, '\n            f'Progress: {feedback.percentage_complete}%')\n\n    def get_result_callback(self, future):\n        result = future.result().result\n        self.get_logger().info(f'Result: {result.message}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    action_client = NavigateActionClient()\n\n    # Send a goal to navigate to position (5.0, 3.0)\n    action_client.send_goal(5.0, 3.0)\n\n    try:\n        rclpy.spin(action_client)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        action_client.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"solution-for-exercise-4-qos-configuration-challenge",children:"Solution for Exercise 4: QoS Configuration Challenge"}),"\n",(0,t.jsx)(n.h3,{id:"qos-example-code",children:"QoS Example Code"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float64\nfrom rclpy.qos import QoSProfile, QoSReliabilityPolicy, QoSHistoryPolicy\n\nclass QoSPublisher(Node):\n\n    def __init__(self):\n        super().__init__('qos_publisher')\n\n        # QoS profile with RELIABLE reliability and KEEP_LAST history\n        qos_profile_reliable = QoSProfile(\n            depth=10,\n            reliability=QoSReliabilityPolicy.RELIABLE,\n            history=QoSHistoryPolicy.KEEP_LAST\n        )\n\n        self.publisher_reliable = self.create_publisher(Float64, 'temperature_reliable', qos_profile_reliable)\n\n        # QoS profile with BEST_EFFORT reliability and KEEP_ALL history\n        qos_profile_best_effort = QoSProfile(\n            depth=10,\n            reliability=QoSReliabilityPolicy.BEST_EFFORT,\n            history=QoSHistoryPolicy.KEEP_ALL\n        )\n\n        self.publisher_best_effort = self.create_publisher(Float64, 'temperature_best_effort', qos_profile_best_effort)\n\n        timer_period = 1.0  # seconds\n        self.timer_reliable = self.create_timer(timer_period, self.timer_callback_reliable)\n        self.timer_best_effort = self.create_timer(timer_period + 0.5, self.timer_callback_best_effort)\n\n        self.counter = 0\n\n    def timer_callback_reliable(self):\n        msg = Float64()\n        msg.data = 20.0 + (self.counter % 5)  # Vary temperature slightly\n        self.publisher_reliable.publish(msg)\n        self.get_logger().info(f'Published (RELIABLE): {msg.data:.2f}')\n        self.counter += 1\n\n    def timer_callback_best_effort(self):\n        msg = Float64()\n        msg.data = 25.0 + (self.counter % 5)  # Vary temperature slightly\n        self.publisher_best_effort.publish(msg)\n        self.get_logger().info(f'Published (BEST_EFFORT): {msg.data:.2f}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    qos_publisher = QoSPublisher()\n\n    try:\n        rclpy.spin(qos_publisher)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        qos_publisher.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"solution-for-exercise-5-parameter-based-configuration",children:"Solution for Exercise 5: Parameter-Based Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"parameter-based-node",children:"Parameter-Based Node"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\nimport rclpy\nfrom rclpy.node import Node\nfrom rclpy.parameter import Parameter\nfrom std_msgs.msg import String\nfrom rcl_interfaces.msg import SetParametersResult\n\nclass ParameterNode(Node):\n\n    def __init__(self):\n        super().__init__('parameter_node')\n\n        # Declare parameters with default values\n        self.declare_parameter('publish_rate', 1.0)  # Hz\n        self.declare_parameter('message_content', 'Hello from parameter node!')\n        self.declare_parameter('node_name', 'parameter_node')\n\n        # Get parameter values\n        self.publish_rate = self.get_parameter('publish_rate').value\n        self.message_content = self.get_parameter('message_content').value\n        self.node_name = self.get_parameter('node_name').value\n\n        # Create publisher\n        self.publisher = self.create_publisher(String, 'parameter_topic', 10)\n\n        # Create timer based on parameter\n        self.timer = self.create_timer(1.0 / self.publish_rate, self.timer_callback)\n\n        # Register parameter callback\n        self.add_on_set_parameters_callback(self.parameter_callback)\n\n        self.get_logger().info(f'Parameter node initialized with rate: {self.publish_rate}Hz')\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'[{self.node_name}] {self.message_content} (Rate: {self.publish_rate}Hz)'\n        self.publisher.publish(msg)\n        self.get_logger().info(f'Published: {msg.data}')\n\n    def parameter_callback(self, params):\n        for param in params:\n            if param.name == 'publish_rate':\n                self.publish_rate = param.value\n                # Update timer with new rate\n                self.destroy_timer(self.timer)\n                self.timer = self.create_timer(1.0 / self.publish_rate, self.timer_callback)\n                self.get_logger().info(f'Publish rate updated to: {self.publish_rate}Hz')\n            elif param.name == 'message_content':\n                self.message_content = param.value\n                self.get_logger().info(f'Message content updated to: {self.message_content}')\n            elif param.name == 'node_name':\n                self.node_name = param.value\n                self.get_logger().info(f'Node name updated to: {self.node_name}')\n\n        return SetParametersResult(successful=True)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    parameter_node = ParameterNode()\n\n    try:\n        rclpy.spin(parameter_node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        parameter_node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"how-to-test-parameters",children:"How to Test Parameters"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Run the node\nros2 run your_package parameter_node\n\n# In another terminal, change parameters\nros2 param set /parameter_node publish_rate 2.0\nros2 param set /parameter_node message_content "New parameter value!"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"implementation-guide",children:"Implementation Guide"}),"\n",(0,t.jsx)(n.h3,{id:"for-exercise-1",children:"For Exercise 1:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Make sure to properly initialize rclpy with ",(0,t.jsx)(n.code,{children:"rclpy.init()"})]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"rclpy.spin()"})," to keep nodes running"]}),"\n",(0,t.jsxs)(n.li,{children:["Always properly clean up with ",(0,t.jsx)(n.code,{children:"destroy_node()"})," and ",(0,t.jsx)(n.code,{children:"rclpy.shutdown()"})]}),"\n",(0,t.jsx)(n.li,{children:"Use appropriate QoS settings for your use case"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"for-exercise-2",children:"For Exercise 2:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Define custom service interfaces in ",(0,t.jsx)(n.code,{children:".srv"})," files"]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"create_service()"})," to create service servers"]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"create_client()"})," to create service clients"]}),"\n",(0,t.jsx)(n.li,{children:"Handle edge cases like division by zero"}),"\n",(0,t.jsx)(n.li,{children:"Properly handle asynchronous service calls"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"for-exercise-3",children:"For Exercise 3:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Define custom action interfaces in ",(0,t.jsx)(n.code,{children:".action"})," files"]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"ActionServer"})," for action servers"]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"ActionClient"})," for action clients"]}),"\n",(0,t.jsx)(n.li,{children:"Implement proper feedback publishing during execution"}),"\n",(0,t.jsx)(n.li,{children:"Handle goal cancellation and preemption"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"for-exercise-4",children:"For Exercise 4:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Import QoS classes from ",(0,t.jsx)(n.code,{children:"rclpy.qos"})]}),"\n",(0,t.jsxs)(n.li,{children:["Create ",(0,t.jsx)(n.code,{children:"QoSProfile"})," with desired settings"]}),"\n",(0,t.jsx)(n.li,{children:"Apply profiles to publishers and subscribers"}),"\n",(0,t.jsx)(n.li,{children:"Understand the trade-offs between different QoS settings"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"for-exercise-5",children:"For Exercise 5:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"declare_parameter()"})," to declare parameters"]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"get_parameter()"})," to retrieve parameter values"]}),"\n",(0,t.jsxs)(n.li,{children:["Implement parameter callbacks with ",(0,t.jsx)(n.code,{children:"add_on_set_parameters_callback()"})]}),"\n",(0,t.jsx)(n.li,{children:"Test parameter changes using ROS 2 command line tools"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Error Handling"}),": Always implement proper error handling for services and actions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Resource Management"}),": Properly clean up resources when nodes are destroyed"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Logging"}),": Use appropriate log levels (info, warn, error) for different messages"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Documentation"}),": Comment your code to explain the purpose of different sections"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Testing"}),": Test your nodes in isolation before integrating them into larger systems"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"QoS Selection"}),": Choose appropriate QoS settings based on your application requirements"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Parameter Validation"}),": Validate parameter values to prevent unexpected behavior"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"common-pitfalls-to-avoid",children:"Common Pitfalls to Avoid"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Forgetting to initialize rclpy"}),": Always call ",(0,t.jsx)(n.code,{children:"rclpy.init()"})," before creating nodes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Not handling node destruction"}),": Always properly clean up nodes and shutdown rclpy"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Using inappropriate QoS settings"}),": Consider your application's requirements for reliability and performance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Not handling service/client timeouts"}),": Implement appropriate timeout handling for services"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Ignoring parameter validation"}),": Validate parameters to prevent invalid configurations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Not using proper message types"}),": Use appropriate standard message types from std_msgs or geometry_msgs when possible"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"These solutions provide complete implementations for each exercise, demonstrating best practices for ROS 2 development. Use these as references when implementing your own solutions, and feel free to modify them to explore different approaches or add additional functionality."})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>a,x:()=>l});var s=r(6540);const t={},i=s.createContext(t);function a(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);